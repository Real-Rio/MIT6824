# MIT6824



## lab记录

### lab 1——mapreduce

**基本流程**

- worker会定期向coordinator发送rpc，询问自己当前需要做什么工作
- 在map阶段，coordinator将每个输入文件分配给一个worker，通知它进行map操作，每个worker完成之后发送rpc通知coordinator
- worker（map）对每个输入文件进行分词，每一个产生的k/v对根据hash值写入对应的中间文件中，命名规则为`mr-X-Y`，X是map任务编号，y是reduce任务编号
- coordinator需要能够检测所有map任务是否都已完成
- map都完成后，coordinator根据中间文件`mr-X-Y`中的"Y"，告诉reduce worker所有的map任务编号，reduce worker在共享磁盘上找到相应的文件调用reduce函数



**TODO**

- rpc的时候网络中断处理

coordinator与worker在通信时应该等待回复，才能确定对方已收到

